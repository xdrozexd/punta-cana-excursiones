import { PrismaClient } from '@prisma/client';
import bcrypt from 'bcryptjs';

const prisma = new PrismaClient();

async function main() {
  console.log('üå± Iniciando seed de la base de datos...');

  // Crear actividades
  const activitiesData = [
    // ‚Äî‚Äî‚Äî Isla Saona ‚Äî‚Äî‚Äî
    {
      name: 'Isla Saona Cl√°sica',
      slug: 'isla-saona-clasica',
      description: 'D√≠a completo en Isla Saona saliendo de Bayahibe. Traslado terrestre, lancha r√°pida, parada en piscina natural, tiempo libre en playa, almuerzo buffet y bebidas locales.',
      shortDescription: 'Saona cl√°sico con piscina natural, almuerzo y bebidas.',
      price: 89.0,
      originalPrice: 99.0,
      duration: 480,
      location: 'Bayahibe',
      imageUrl: 'https://images.pexels.com/photos/1450353/pexels-photo-1450353.jpeg',
      featured: true,
      category: 'tour',
      capacity: 30,
      highlights: ['Piscina natural', 'Almuerzo buffet', 'Bebidas locales', 'Playas v√≠rgenes'],
      included: ['Traslado terrestre', 'Lancha r√°pida', 'Gu√≠a', 'Almuerzo buffet', 'Bebidas locales'],
      notIncluded: ['Fotos', 'Propinas'],
      tags: ['saona', 'playa', 'caribe'],
      images: [
        'https://images.pexels.com/photos/1450353/pexels-photo-1450353.jpeg'
      ],
      languages: ['Espa√±ol', 'Ingl√©s'],
      availability: ['Lunes', 'Martes', 'Mi√©rcoles', 'Jueves', 'Viernes', 'S√°bado'],
      startTime: ['7:00 AM', '9:00 AM'],
      pickupIncluded: true,
      meetingPoint: 'Hoteles en B√°varo/Punta Cana o punto en Bayahibe',
      itinerary: [{ step: 'Recogida y traslado a Bayahibe' }, { step: 'Lancha a piscina natural' }, { step: 'Tiempo en Isla Saona' }, { step: 'Almuerzo buffet' }]
    },
    {
      name: 'Isla Saona Premium',
      slug: 'isla-saona-premium',
      description: 'Versi√≥n premium con playa exclusiva, bar premium, almuerzo mejorado y grupos m√°s peque√±os para mayor comodidad.',
      shortDescription: 'Saona con servicio premium y playa exclusiva.',
      price: 120.0,
      originalPrice: 135.0,
      duration: 480,
      location: 'Bayahibe',
      imageUrl: 'https://images.pexels.com/photos/248797/pexels-photo-248797.jpeg',
      featured: true,
      category: 'tour',
      capacity: 20,
      highlights: ['Playa exclusiva', 'Bar premium', 'Grupo reducido'],
      included: ['Traslados', 'Barco r√°pido o catamar√°n', 'Bar premium', 'Almuerzo premium'],
      notIncluded: ['Fotos', 'Propinas'],
      tags: ['saona', 'premium'],
      images: ['https://images.pexels.com/photos/248797/pexels-photo-248797.jpeg'],
      languages: ['Espa√±ol', 'Ingl√©s'],
      availability: ['Lunes', 'Mi√©rcoles', 'Viernes', 'S√°bado'],
      startTime: ['7:00 AM'],
      pickupIncluded: true,
      meetingPoint: 'Lobby del hotel',
      itinerary: [{ step: 'Check-in en Bayahibe' }, { step: 'Catamar√°n/lancha a Saona' }, { step: 'Club de playa premium' }]
    },
    {
      name: 'Isla Saona en Catamar√°n',
      slug: 'isla-saona-catamaran',
      description: 'Experiencia en catamar√°n hacia/desde Isla Saona con m√∫sica y ambiente festivo, snorkeling opcional y parada en piscina natural.',
      shortDescription: 'Saona navegando en catamar√°n.',
      price: 105.0,
      duration: 540,
      location: 'Bayahibe',
      imageUrl: 'https://images.pexels.com/photos/163236/luxury-yacht-boat-speed-water-163236.jpeg',
      featured: false,
      category: 'tour',
      capacity: 40,
      highlights: ['Catamar√°n', 'Piscina natural', 'Snorkel opcional'],
      included: ['Traslados', 'Catamar√°n/lancha', 'Bebidas', 'Almuerzo'],
      notIncluded: ['Fotos', 'Propinas'],
      tags: ['saona', 'catamaran'],
      images: ['https://images.pexels.com/photos/163236/luxury-yacht-boat-speed-water-163236.jpeg']
    },

    // ‚Äî‚Äî‚Äî Isla Catalina ‚Äî‚Äî‚Äî
    {
      name: 'Isla Catalina Snorkel',
      slug: 'isla-catalina-snorkel',
      description: 'Salida en barco a Isla Catalina con 2 paradas de snorkel (muro y arrecife), almuerzo en playa y bebidas.',
      shortDescription: 'Snorkel en Isla Catalina con almuerzo.',
      price: 95.0,
      duration: 420,
      location: 'La Romana',
      imageUrl: 'https://images.pexels.com/photos/1645028/pexels-photo-1645028.jpeg',
      featured: true,
      category: 'acu√°tico',
      capacity: 25,
      highlights: ['2 spots de snorkel', 'Agua cristalina', 'Almuerzo en playa'],
      included: ['Equipo snorkel', 'Gu√≠a', 'Barco', 'Almuerzo', 'Bebidas'],
      notIncluded: ['Fotos', 'Propinas']
    },
    {
      name: 'Isla Catalina Buceo (2 tanques)',
      slug: 'isla-catalina-buceo',
      description: 'Para buzos certificados: 2 inmersiones (muro y arrecife) con divemaster, almuerzo y bebidas. Opcional equipo.',
      shortDescription: 'Doble inmersi√≥n en Catalina.',
      price: 160.0,
      duration: 420,
      location: 'La Romana',
      imageUrl: 'https://images.pexels.com/photos/1893532/pexels-photo-1893532.jpeg',
      featured: false,
      category: 'acu√°tico',
      capacity: 12,
      highlights: ['Muro de Catalina', 'Arrecife', 'Divemaster'],
      included: ['Barco', 'Divemaster', 'Tanques y plomos', 'Almuerzo', 'Bebidas'],
      notIncluded: ['Equipo completo (opcional)']
    },
    {
      name: 'Isla Catalina Paseo',
      slug: 'isla-catalina-paseo',
      description: 'D√≠a de playa en Isla Catalina con traslado en barco, tiempo libre, almuerzo y barra de bebidas.',
      shortDescription: 'Relajaci√≥n en Catalina con almuerzo.',
      price: 110.0,
      duration: 420,
      location: 'La Romana',
      imageUrl: 'https://images.pexels.com/photos/2613941/pexels-photo-2613941.jpeg',
      featured: false,
      category: 'tour',
      capacity: 30
    },

    // ‚Äî‚Äî‚Äî Combinados y eco ‚Äî‚Äî‚Äî
    {
      name: 'Costa Esmeralda + Monta√±a Redonda + Quad El Lim√≥n',
      slug: 'costa-esmeralda-montana-redonda-quad-el-limon',
      description: 'Ruta panor√°mica por Costa Esmeralda, subida a Monta√±a Redonda con columpios y vistas 360¬∞, y recorrido en quad por El Lim√≥n.',
      shortDescription: 'Playa, mirador y aventura en quad.',
      price: 139.0,
      duration: 540,
      location: 'Miches / El Lim√≥n',
      imageUrl: 'https://images.pexels.com/photos/461593/pexels-photo-461593.jpeg',
      featured: true,
      category: 'aventura',
      capacity: 16,
      highlights: ['Monta√±a Redonda', 'Costa Esmeralda', 'Quad'],
      included: ['Transporte', 'Entradas', 'Gu√≠a', 'Equipo quad compartido', 'Almuerzo'],
      notIncluded: ['Fotos', 'Propinas']
    },
    {
      name: 'Parque Nacional Los Haitises + Monta√±a Redonda',
      slug: 'los-haitises-montana-redonda',
      description: 'Explora manglares y cuevas de Los Haitises en lancha, observa aves y pinturas rupestres; contin√∫a hacia Monta√±a Redonda para vistas incre√≠bles.',
      shortDescription: 'Haitises en lancha + mirador.',
      price: 145.0,
      duration: 600,
      location: 'Saman√° / Miches',
      imageUrl: 'https://images.pexels.com/photos/417074/pexels-photo-417074.jpeg',
      featured: true,
      category: 'eco',
      capacity: 20
    },
    {
      name: 'Excursi√≥n a Santo Domingo Colonial',
      slug: 'santo-domingo-colonial',
      description: 'City tour guiado por la Zona Colonial: Catedral Primada, Alc√°zar de Col√≥n, Parque Col√≥n, cuevas de Los Tres Ojos y tiempo para compras.',
      shortDescription: 'Historia y cultura en la primera ciudad de Am√©rica.',
      price: 70.0,
      duration: 600,
      location: 'Santo Domingo',
      imageUrl: 'https://images.pexels.com/photos/466685/pexels-photo-466685.jpeg',
      featured: false,
      category: 'cultural',
      capacity: 40
    },
    {
      name: 'Saman√° Explorer Terrestre',
      slug: 'samana-explorer-terrestre',
      description: 'Recorrido terrestre por Saman√° con visita al Salto El Lim√≥n (caminata/caballo) y tiempo en playa El Valle o Rinc√≥n seg√∫n temporada.',
      shortDescription: 'Aventura terrestre por Saman√° y El Lim√≥n.',
      price: 135.0,
      duration: 720,
      location: 'Saman√°',
      imageUrl: 'https://images.pexels.com/photos/158773/forest-trees-fog-nature-158773.jpeg',
      featured: false,
      category: 'aventura',
      capacity: 20
    },
    {
      name: 'R√≠o Chav√≥n + Isla Saona Combinada',
      slug: 'rio-chavon-saona-combinada',
      description: 'Paseo panor√°mico por R√≠o Chav√≥n en barcaza con vistas de selva y ca√±√≥n, seguido por experiencia de Isla Saona con almuerzo.',
      shortDescription: 'R√≠o Chav√≥n + Saona en un d√≠a.',
      price: 129.0,
      duration: 600,
      location: 'La Romana / Bayahibe',
      imageUrl: 'https://images.pexels.com/photos/478938/pexels-photo-478938.jpeg',
      featured: false,
      category: 'tour',
      capacity: 30
    },

    // ‚Äî‚Äî‚Äî Aventura y adrenalina ‚Äî‚Äî‚Äî
    {
      name: 'Tour en Buggy por Macao',
      slug: 'buggy-macao',
      description: 'Conduce buggy por caminos rurales hasta la playa de Macao. Paradas en cenote y rancho local. Opci√≥n de buggy doble.',
      shortDescription: 'Aventura off-road hasta Macao.',
      price: 60.0,
      duration: 240,
      location: 'Macao / Punta Cana',
      imageUrl: 'https://images.pexels.com/photos/1118448/pexels-photo-1118448.jpeg',
      featured: true,
      category: 'aventura',
      capacity: 20
    },
    {
      name: 'Buggy Nocturno con Cena y Danza Ta√≠na',
      slug: 'buggy-nocturno-cena-taina',
      description: 'Recorrido nocturno en buggy seguido de cena tem√°tica y espect√°culo de danza ta√≠na.',
      shortDescription: 'Buggy nocturno + cena show.',
      price: 85.0,
      duration: 240,
      location: 'B√°varo',
      imageUrl: 'https://images.pexels.com/photos/210019/pexels-photo-210019.jpeg',
      featured: false,
      category: 'aventura',
      capacity: 20
    },
    {
      name: 'ATV por Senderos y Playas',
      slug: 'atv-senderos-playas',
      description: 'Ruta en cuatrimoto por senderos y tramos de playa. Ideal para amantes de la adrenalina.',
      shortDescription: 'ATV off-road costero.',
      price: 75.0,
      duration: 180,
      location: 'Punta Cana',
      imageUrl: 'https://images.pexels.com/photos/3593926/pexels-photo-3593926.jpeg',
      featured: false,
      category: 'aventura',
      capacity: 16
    },
    {
      name: 'Canopy Zip Lines B√°varo',
      slug: 'canopy-zip-lines-bavaro',
      description: 'Circuito de tirolesas entre plataformas con equipos de seguridad certificados y gu√≠as expertos.',
      shortDescription: 'Tirolesas en la selva de B√°varo.',
      price: 70.0,
      duration: 180,
      location: 'B√°varo',
      imageUrl: 'https://images.pexels.com/photos/1660995/pexels-photo-1660995.jpeg',
      featured: false,
      category: 'aventura',
      capacity: 18
    },
    {
      name: 'Parasailing en B√°varo',
      slug: 'parasailing-bavaro',
      description: 'Vuelo en parasailing sobre la costa de B√°varo con vistas del arrecife y las playas.',
      shortDescription: 'Parasailing con vistas al Caribe.',
      price: 55.0,
      duration: 60,
      location: 'B√°varo',
      imageUrl: 'https://images.pexels.com/photos/462331/pexels-photo-462331.jpeg',
      featured: false,
      category: 'acu√°tico',
      capacity: 10
    },
    {
      name: 'Bavaro Adventure Park (Combo)',
      slug: 'bavaro-adventure-park-combo',
      description: 'Combo de actividades como paintball, tirolesa y escalada en Bavaro Adventure Park. Incluye equipo y supervisi√≥n.',
      shortDescription: 'Parque de aventura multi-actividad.',
      price: 89.0,
      duration: 300,
      location: 'B√°varo',
      imageUrl: 'https://images.pexels.com/photos/48824/people-fall-hiking-adventure-48824.jpeg',
      featured: false,
      category: 'aventura',
      capacity: 20
    },
    {
      name: 'Monkeyland + Safari Cacao & Caf√©',
      slug: 'monkeyland-safari-cacao-cafe',
      description: 'Interacci√≥n con monos ardilla en un entorno controlado y visita educativa a plantaciones de cacao y caf√©.',
      shortDescription: 'Monos + cultura del cacao y caf√©.',
      price: 79.0,
      duration: 300,
      location: 'Anamuya / B√°varo',
      imageUrl: 'https://images.pexels.com/photos/235922/pexels-photo-235922.jpeg',
      featured: true,
      category: 'eco',
      capacity: 20
    },

    // ‚Äî‚Äî‚Äî Acu√°ticas y marinas ‚Äî‚Äî‚Äî
    {
      name: 'Party Boat en Catamar√°n',
      slug: 'party-boat-catamaran',
      description: 'Fiesta en catamar√°n con barra libre, m√∫sica, animaci√≥n y parada para snorkel y piscina natural.',
      shortDescription: 'Catamar√°n con m√∫sica y drinks.',
      price: 65.0,
      duration: 180,
      location: 'Punta Cana',
      imageUrl: 'https://images.pexels.com/photos/3781517/pexels-photo-3781517.jpeg',
      featured: true,
      category: 'fiesta',
      capacity: 45
    },
    {
      name: 'Barco Pirata B√°varo',
      slug: 'barco-pirata-bavaro',
      description: 'Espect√°culo tem√°tico pirata con actividades a bordo, snorkeling y animaci√≥n para toda la familia.',
      shortDescription: 'Show pirata + snorkel.',
      price: 75.0,
      duration: 180,
      location: 'B√°varo',
      imageUrl: 'https://images.pexels.com/photos/460672/pexels-photo-460672.jpeg',
      featured: false,
      category: 'familiar',
      capacity: 60
    },
    {
      name: 'Pesca de Altura en Punta Cana',
      slug: 'pesca-altura-punta-cana',
      description: 'Salida en yate para pesca de altura (mahi-mahi, wahoo, at√∫n) con equipo completo y capit√°n.',
      shortDescription: 'Charter de pesca deportiva.',
      price: 120.0,
      duration: 240,
      location: 'Punta Cana',
      imageUrl: 'https://images.pexels.com/photos/38153/fisherman-fishing-man-rod-38153.jpeg',
      featured: false,
      category: 'acu√°tico',
      capacity: 6
    },
    {
      name: 'Seaquarium (Paseo Submarino)',
      slug: 'seaquarium-paseo-submarino',
      description: 'Caminata submarina con casco Sea Trek en plataforma, snorkeling y paseo en catamar√°n.',
      shortDescription: 'Caminata submarina segura.',
      price: 110.0,
      duration: 180,
      location: 'B√°varo',
      imageUrl: 'https://images.pexels.com/photos/256319/pexels-photo-256319.jpeg',
      featured: false,
      category: 'acu√°tico',
      capacity: 20
    },
    {
      name: 'Ocean Spa Dr Fish',
      slug: 'ocean-spa-dr-fish',
      description: 'Experiencia de relajaci√≥n en catamar√°n con masajes, estiramientos, jacuzzi marino y terapia Dr. Fish.',
      shortDescription: 'Spa flotante en el Caribe.',
      price: 135.0,
      duration: 180,
      location: 'B√°varo',
      imageUrl: 'https://images.pexels.com/photos/161780/relax-relaxing-bench-rest-161780.jpeg',
      featured: true,
      category: 'relax',
      capacity: 30
    },
    {
      name: 'Nado con Delfines (Intermedio)',
      slug: 'nado-delfines-intermedio',
      description: 'Interacci√≥n con delfines que incluye beso, abrazo, saludo y empuje dorsal o belly ride seg√∫n programa.',
      shortDescription: 'Programa intermedio con delfines.',
      price: 139.0,
      duration: 60,
      location: 'B√°varo',
      imageUrl: 'https://images.pexels.com/photos/870170/pexels-photo-870170.jpeg',
      featured: true,
      category: 'familiar',
      capacity: 12,
      minAge: 6
    },

    // ‚Äî‚Äî‚Äî Vida nocturna y experiencias ‚Äî‚Äî‚Äî
    {
      name: 'Coco Bongo (Entrada Est√°ndar)',
      slug: 'coco-bongo-estandar',
      description: 'Entrada a Coco Bongo con shows en vivo, m√∫sica y barra libre nacional. Traslados opcionales.',
      shortDescription: 'Noche de shows y fiesta.',
      price: 85.0,
      duration: 300,
      location: 'B√°varo',
      imageUrl: 'https://images.pexels.com/photos/1105666/pexels-photo-1105666.jpeg',
      featured: true,
      category: 'nocturno',
      capacity: 200
    },
    {
      name: 'Cena Tem√°tica con Danza Ta√≠na',
      slug: 'cena-tematica-danza-taina',
      description: 'Cena tem√°tica al aire libre acompa√±ada de espect√°culo cultural ta√≠no con m√∫sica y danzas tradicionales.',
      shortDescription: 'Cultura y gastronom√≠a caribe√±a.',
      price: 69.0,
      duration: 150,
      location: 'B√°varo / Cabeza de Toro',
      imageUrl: 'https://images.pexels.com/photos/5560763/pexels-photo-5560763.jpeg',
      featured: false,
      category: 'cultural',
      capacity: 80
    },
    {
      name: 'Evento Privado en Catamar√°n',
      slug: 'evento-privado-catamaran',
      description: 'Charter privado de catamar√°n para eventos, con barra libre, m√∫sica y paradas para snorkel o piscina natural.',
      shortDescription: 'Catamar√°n privado a tu medida.',
      price: 650.0,
      duration: 180,
      location: 'Punta Cana',
      imageUrl: 'https://images.pexels.com/photos/3781520/pexels-photo-3781520.jpeg',
      featured: true,
      category: 'privado',
      capacity: 40
    },
    {
      name: 'Evento Privado en Playa',
      slug: 'evento-privado-playa',
      description: 'Montaje privado en playa para celebraciones o eventos corporativos con catering y m√∫sica.',
      shortDescription: 'Evento en playa personalizado.',
      price: 900.0,
      duration: 240,
      location: 'Playa de Punta Cana',
      imageUrl: 'https://images.pexels.com/photos/457882/pexels-photo-457882.jpeg',
      featured: false,
      category: 'privado',
      capacity: 80
    }
  ];

  console.log('Creando actividades...');
  for (const activity of activitiesData) {
    await prisma.activity.upsert({
      where: { slug: activity.slug },
      update: activity,
      create: activity
    });
  }

  // Crear usuario administrador
  console.log('Creando usuario administrador...');
  const salt = await bcrypt.genSalt(10);
  const hashedPassword = await bcrypt.hash('admin123', salt);
  
  await prisma.user.upsert({
    where: { email: 'admin@example.com' },
    update: {
      password: hashedPassword
    },
    create: {
      username: 'admin',
      email: 'admin@example.com',
      password: hashedPassword,
      role: 'admin'
    }
  });

  // Crear configuraciones iniciales
  console.log('Creando configuraciones iniciales...');
  const settingsData = [
    { key: 'site_name', value: 'Punta Cana Excursiones' },
    { key: 'contact_email', value: 'info@puntacanaexcursiones.com' },
    { key: 'contact_phone', value: '+1 809-555-1234' },
    { key: 'currency', value: 'USD' },
    { key: 'tax_rate', value: '18' }
  ];

  for (const setting of settingsData) {
    await prisma.setting.upsert({
      where: { key: setting.key },
      update: { value: setting.value },
      create: setting
    });
  }

  console.log('‚úÖ Seed completado con √©xito!');
}

main()
  .catch((e) => {
    console.error('Error en el seed:', e);
    process.exit(1);
  })
  .finally(async () => {
    await prisma.$disconnect();
  });
